@model Book


<div class="container py-5">
    <h1 class="text-primary">@Model.BookTitle</h1>
    <div class="row">
        <div class="col-md-4">
            <img src="@Model.ImageUrl" alt="@Model.BookTitle" class="img-fluid" />
        </div>
        <div class="col-md-8">
            <p><strong>Author:</strong> @Model.Author</p>
            <p><strong>Publisher:</strong> @Model.Publisher</p>
            <p><strong>Year of Publication:</strong> @Model.YearOfPublication</p>
            <p><strong>Genre:</strong> @Model.Genre</p>
            <p><strong>Age Restriction:</strong> @Model.AgeRestriction</p>
            <p><strong>Price for Borrow:</strong> $@Model.PriceForBorrow</p>

            @if (Model.DISCOUNTEDPriceForBorrow > 0)
            {
                <strong>Discounted Borrow Price:</strong> @Model.DISCOUNTEDPriceForBorrow

                <br>
            }


            <p><strong>Price for Buy:</strong> $@Model.PriceForBuy</p>
            @if (Model.DISCOUNTEDPriceForBuy > 0)
            {
                <strong>Discounted Buy Price:</strong> @Model.DISCOUNTEDPriceForBuy

                <br>
            }
            
          
            <p><strong>Popularity:</strong> @Model.Popularity</p>
            <p>
                <strong>Formats Available:</strong>
                @if (Model.PDF)
                {
                    <span>PDF </span>
                }
                @if (Model.epub)
                {
                    <span>EPUB </span>
                }
                @if (Model.f2b)
                {
                    <span>F2B </span>
                }
                @if (Model.mobi)
                {
                    <span>MOBI </span>
                }
            </p>

           
        </div>
    </div>

    <form method="post" action="/Cart/AddToCart">
        <input type="hidden" name="bookTitle" value="@Model.BookTitle" />
        <input type="hidden" name="author" value="@Model.Author" />
        <input type="hidden" name="publisher" value="@Model.Publisher" />
        <input type="hidden" name="yearOfPublication" value="@Model.YearOfPublication" />

        <!-- כפתור השאלה -->
        <input type="hidden" name="actionType" value="borrow" />
        <button type="submit" class="btn btn-warning mt-2">Borrow</button>
    </form>

    <form method="post" action="/Cart/AddToCart">
        <input type="hidden" name="bookTitle" value="@Model.BookTitle" />
        <input type="hidden" name="author" value="@Model.Author" />
        <input type="hidden" name="publisher" value="@Model.Publisher" />
        <input type="hidden" name="yearOfPublication" value="@Model.YearOfPublication" />

        <!-- כפתור קנייה -->
        <input type="hidden" name="actionType" value="buy" />
        <button type="submit" class="btn btn-success mt-2">Buy</button>
    </form>

    <hr class="my-5">

    <!-- Feedback & Reviews Section -->
    <div class="mt-5">
        <h2>Feedback & Reviews</h2>

        @if (ViewBag.Feedbacks != null && ((List<LibraryApp.Models.Feedback>)ViewBag.Feedbacks).Any())
        {
            <ul class="list-group">
                @foreach (var feedback in (List<LibraryApp.Models.Feedback>)ViewBag.Feedbacks)
                {
                    <li class="list-group-item">
                        <strong>@feedback.UserName</strong> - @feedback.Rating/5<br />
                        <small>@feedback.FeedbackDate.ToShortDateString()</small>
                        <p>@feedback.Comment</p>
                    </li>
                }
            </ul>
        }
        else
        {
            <p>No feedbacks available for this book.</p>
        }
    </div>




    <!-- Alerts -->
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger mt-3">@TempData["ErrorMessage"]</div>
    }
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success mt-3">@TempData["SuccessMessage"]</div>
    }
</div>
